<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Share Button</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #0d1117;
      color: #c9d1d9;
    }
    .share-btn {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 1.2rem;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
      color: #c9d1d9;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .share-btn:hover {
      background: #ffab6b;
      color: #0d1117;
      border-color: #ffab6b;
    }
  </style>
</head>
<body>
  <h1>Test Share Button</h1>
  <button class="share-btn" id="shareBtn">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z" fill="currentColor"/>
    </svg>
    Share
  </button>

  <script>
    // Share button functionality
    const shareBtn = document.getElementById('shareBtn');
    if (shareBtn) {
      shareBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        e.stopPropagation();

        const shareData = {
          title: 'Test Share',
          text: 'This is a test share functionality.',
          url: window.location.href
        };

        console.log('Share button clicked');

        // Check if Web Share API is supported
        if (navigator.share) {
          console.log('Web Share API supported');
          try {
            await navigator.share(shareData);
            console.log('Shared successfully');
          } catch (err) {
            console.log('Error sharing:', err);
            // If Web Share fails, show fallback
            showShareFallback(shareData);
          }
        } else {
          console.log('Web Share API not supported, using fallback');
          // Fallback: Try to copy URL to clipboard first
          try {
            await navigator.clipboard.writeText(window.location.href);
            showShareFeedback('Link copied to clipboard!');
          } catch (err) {
            console.log('Clipboard failed, showing share options');
            // If clipboard fails, show share options
            showShareFallback(shareData);
          }
        }
      });
    }

    // Function to show share feedback
    function showShareFeedback(message) {
      console.log('Showing feedback:', message);
      const feedback = document.createElement('div');
      feedback.textContent = message;
      feedback.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #ffab6b;
        color: #0d1117;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        font-weight: 500;
        z-index: 1000;
      `;

      document.body.appendChild(feedback);

      setTimeout(() => {
        feedback.remove();
      }, 3000);
    }

    // Function to show fallback share options
    function showShareFallback(shareData) {
      console.log('Showing share fallback modal');

      // Remove any existing share modal
      const existingModal = document.querySelector('.share-modal');
      if (existingModal) {
        existingModal.remove();
      }

      const shareUrls = {
        twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.text)}&url=${encodeURIComponent(shareData.url)}`,
        linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareData.url)}`,
        facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareData.url)}`,
        telegram: `https://t.me/share/url?url=${encodeURIComponent(shareData.url)}&text=${encodeURIComponent(shareData.text)}`
      };

      const modal = document.createElement('div');
      modal.className = 'share-modal';
      modal.innerHTML = `
        <div class="share-modal-overlay">
          <div class="share-modal-content">
            <h3>Share this website</h3>
            <div class="share-links">
              <a href="${shareUrls.twitter}" target="_blank" class="share-link twitter">Twitter</a>
              <a href="${shareUrls.linkedin}" target="_blank" class="share-link linkedin">LinkedIn</a>
              <a href="${shareUrls.facebook}" target="_blank" class="share-link facebook">Facebook</a>
              <a href="${shareUrls.telegram}" target="_blank" class="share-link telegram">Telegram</a>
            </div>
            <button class="share-modal-close">Close</button>
          </div>
        </div>
      `;

      document.body.appendChild(modal);
      console.log('Modal added to DOM');

      // Add event listeners after modal is added to DOM
      const closeBtn = modal.querySelector('.share-modal-close');
      const overlay = modal.querySelector('.share-modal-overlay');

      const closeModal = () => {
        console.log('Closing modal');
        modal.remove();
      };

      closeBtn.addEventListener('click', closeModal);
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeModal();
        }
      });

      // Close on Escape key
      const handleEscape = (e) => {
        if (e.key === 'Escape') {
          closeModal();
          document.removeEventListener('keydown', handleEscape);
        }
      };
      document.addEventListener('keydown', handleEscape);

      // Prevent modal from closing immediately
      setTimeout(() => {
        modal.style.opacity = '1';
        console.log('Modal opacity set to 1');
      }, 10);
    }
  </script>

  <style>
    /* Share modal styles */
    .share-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .share-modal-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .share-modal-content {
      background: #161b22;
      padding: 2rem;
      border-radius: 12px;
      max-width: 400px;
      width: 100%;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .share-modal h3 {
      color: #c9d1d9;
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      font-weight: 600;
    }

    .share-links {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 1.5rem;
    }

    .share-link {
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: transform 0.2s ease, opacity 0.2s ease;
      display: inline-block;
      min-width: 80px;
    }

    .share-link:hover {
      transform: translateY(-2px);
      opacity: 0.9;
    }

    .share-link.twitter { background: #1da1f2; }
    .share-link.linkedin { background: #0077b5; }
    .share-link.facebook { background: #1877f2; }
    .share-link.telegram { background: #0088cc; }

    .share-modal-close {
      background: #30363d;
      color: #c9d1d9;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s ease;
    }

    .share-modal-close:hover {
      background: #21262d;
    }

    /* Animate modal appearance */
    .share-modal[style*="opacity: 1"] .share-modal-content {
      transform: scale(1);
    }
  </style>
</body>
</html>
